global.window = global;
require('../src/data');
require('./data.spec.js');

const worldata = {
  'PER': {
    'indicators': [
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': '',
          '1991': '',
          '1992': '',
          '1993': '',
          '1994': '',
          '1995': '',
          '1996': '',
          '1997': '',
          '1998': '',
          '1999': '',
          '2000': '',
          '2001': '',
          '2002': 31.4799995422363,
          '2003': 29.6299991607666,
          '2004': 27.6299991607666,
          '2005': 27.2099990844727,
          '2006': 26.9699993133545,
          '2007': 27.6700000762939,
          '2008': 26.9599990844727,
          '2009': 27.3600006103516,
          '2010': 25.3400001525879,
          '2011': 24.7999992370605,
          '2012': 25.0400009155273,
          '2013': 24.0900001525879,
          '2014': 24.2099990844727,
          '2015': 21.6800003051758,
          '2016': 23.7399997711182,
          '2017': 23.7600002288818
        },
        'countryName': 'Perú',
        'indicatorName': 'Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)PER',
        'indicatorCode': 'SL.TLF.PART.FE.ZS'
      }
    ],
    'dataSource': 'Indicadores del desarrollo mundial',
    'lastUpdated': '2018-11-14'
  },
  'MEX': {
    'indicators': [
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': 33.1,
          '1991': 31.8,
          '1992': 30.6,
          '1993': 29.4,
          '1994': 28.4,
          '1995': 27.5,
          '1996': 26.7,
          '1997': 25.9,
          '1998': 25.1,
          '1999': 24.3,
          '2000': 23.6,
          '2001': 22.9,
          '2002': 22.2,
          '2003': 21.5,
          '2004': 20.8,
          '2005': 20,
          '2006': 19.2,
          '2007': 18.2,
          '2008': 17.3,
          '2009': 16.4,
          '2010': 15.6,
          '2011': 14.9,
          '2012': 14.5,
          '2013': 14.2,
          '2014': 14,
          '2015': 14.1,
          '2016': 14.4,
          '2017': ''
        },
        'countryName': 'México',
        'indicatorName': 'Prevalencia de anemia entre mujeres no embarazadas (% de mujeres entre 15-49 años)MEX',
        'indicatorCode': 'SH.ANM.NPRG.ZS'
      }
    ],
    'dataSource': 'Indicadores del desarrollo mundial',
    'lastUpdated': '2018-11-14'
  },
  'BRA': {
    'indicators': [
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': '',
          '1991': '',
          '1992': '',
          '1993': '',
          '1994': '',
          '1995': '',
          '1996': '',
          '1997': '',
          '1998': '',
          '1999': '',
          '2000': '',
          '2001': '',
          '2002': '',
          '2003': '',
          '2004': '',
          '2005': '',
          '2006': '',
          '2007': '',
          '2008': '',
          '2009': '',
          '2010': '',
          '2011': '',
          '2012': '',
          '2013': 0,
          '2014': '',
          '2015': 0,
          '2016': '',
          '2017': 0
        },
        'countryName': 'Brasil',
        'countryCode': 'BRA',
        'indicatorName': 'La ley exige igualdad de remuneración para hombres y mujeres por trabajo de igual valor (1=sí; 0=no)BRA',
        'indicatorCode': 'SG.LAW.EQRM.WK'
      },
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': '',
          '1991': '',
          '1992': '',
          '1993': '',
          '1994': '',
          '1995': '',
          '1996': '',
          '1997': '',
          '1998': '',
          '1999': '',
          '2000': '',
          '2001': '',
          '2002': '',
          '2003': '',
          '2004': '',
          '2005': '',
          '2006': '',
          '2007': '',
          '2008': '',
          '2009': 1,
          '2010': '',
          '2011': 1,
          '2012': '',
          '2013': 0,
          '2014': '',
          '2015': 0,
          '2016': '',
          '2017': 0
        },
        'countryName': 'Brasil',
        'countryCode': 'BRA',
        'indicatorName': 'Las mujeres no embarazadas y que no amamantan pueden hacer los mismos trabajos que los hombres (1=sí; 0=no)',
        'indicatorCode': 'SG.JOB.NOPN.EQ'
      }
    ],
    'dataSource': 'Indicadores del desarrollo mundial',
    'lastUpdated': '2018-11-14'
  },
  'CHL': {
    'indicators': [
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': '',
          '1991': '',
          '1992': '',
          '1993': '',
          '1994': '',
          '1995': '',
          '1996': '',
          '1997': '',
          '1998': '',
          '1999': '',
          '2000': '',
          '2001': '',
          '2002': '',
          '2003': '',
          '2004': '',
          '2005': '',
          '2006': '',
          '2007': '',
          '2008': '',
          '2009': 22.5900001525879,
          '2010': 31.9099998474121,
          '2011': 33.2400016784668,
          '2012': 33.310001373291,
          '2013': 33.0099983215332,
          '2014': 33.8300018310547,
          '2015': 32.9099998474121,
          '2016': 34.0999984741211,
          '2017': 33.7200012207031
        },
        'countryName': 'Chile',
        'countryCode': 'CHL',
        'indicatorName': 'Empleo de tiempo parcial, mujeres (% del total de mujeres empleadas)CHL',
        'indicatorCode': 'SL.TLF.PART.FE.ZS'
      },
      {
        'data': {
          '1960': '',
          '1961': '',
          '1962': '',
          '1963': '',
          '1964': '',
          '1965': '',
          '1966': '',
          '1967': '',
          '1968': '',
          '1969': '',
          '1970': '',
          '1971': '',
          '1972': '',
          '1973': '',
          '1974': '',
          '1975': '',
          '1976': '',
          '1977': '',
          '1978': '',
          '1979': '',
          '1980': '',
          '1981': '',
          '1982': '',
          '1983': '',
          '1984': '',
          '1985': '',
          '1986': '',
          '1987': '',
          '1988': '',
          '1989': '',
          '1990': '',
          '1991': '',
          '1992': '',
          '1993': '',
          '1994': '',
          '1995': '',
          '1996': 40.1580009460449,
          '1997': '',
          '1998': 49.7099990844727,
          '1999': '',
          '2000': 49.3521995544434,
          '2001': '',
          '2002': '',
          '2003': 52.7793006896973,
          '2004': '',
          '2005': '',
          '2006': 51.684700012207,
          '2007': '',
          '2008': '',
          '2009': 49.780101776123,
          '2010': 55.3550987243652,
          '2011': 57.0130996704102,
          '2012': 56.421501159668,
          '2013': 56.7743988037109,
          '2014': 56.8973007202148,
          '2015': 55.7249984741211,
          '2016': 55.8078994750977,
          '2017': 55.9445991516113
        },
        'countryName': 'Chile',
        'countryCode': 'CHL',
        'indicatorName': 'Fuerza laboral con educación intermedia (% del total)',
        'indicatorCode': 'SL.TLF.INTM.ZS'
      }
    ],
    'dataSource': 'Indicadores del desarrollo mundial',
    'lastUpdated': '2018-11-14'
  }
};

const input = [['2002', 31.4799995422363], ['2003', 29.6299991607666], ['2004', 27.6299991607666], ['2005', 27.2099990844727], ['2006', 26.9699993133545],
  ['2007', 27.6700000762939], ['2008', 26.9599990844727], ['2009', 27.3600006103516], ['2010', 25.3400001525879], ['2011', 24.7999992370605],
  ['2012', 25.0400009155273], ['2013', 24.0900001525879], ['2014', 24.2099990844727], ['2015', 21.6800003051758], ['2016', 23.7399997711182], ['2017', 23.7600002288818]];

const outputValMay = [['2002', 31.4799995422363], ['2003', 29.6299991607666], ['2007', 27.6700000762939], ['2004', 27.6299991607666], ['2009', 27.3600006103516],
  ['2005', 27.2099990844727], ['2006', 26.9699993133545], ['2008', 26.9599990844727], ['2010', 25.3400001525879], ['2012', 25.0400009155273], ['2011', 24.7999992370605],
  ['2014', 24.2099990844727], ['2013', 24.0900001525879], ['2017', 23.7600002288818], ['2016', 23.7399997711182], ['2015', 21.6800003051758]];
  
const outputValMen = [['2015', 21.6800003051758], ['2016', 23.7399997711182], ['2017', 23.7600002288818], ['2013', 24.0900001525879], ['2014', 24.2099990844727],
  ['2011', 24.7999992370605], ['2012', 25.0400009155273], ['2010', 25.3400001525879], ['2008', 26.9599990844727], ['2006', 26.9699993133545], ['2005', 27.2099990844727],
  ['2009', 27.3600006103516], ['2004', 27.6299991607666], ['2007', 27.6700000762939], ['2003', 29.6299991607666], ['2002', 31.4799995422363], ];
  
const outputAñMay = [['2017', 23.7600002288818], ['2016', 23.7399997711182], ['2015', 21.6800003051758], ['2014', 24.2099990844727], ['2013', 24.0900001525879], 
  ['2012', 25.0400009155273], ['2011', 24.7999992370605], ['2010', 25.3400001525879], ['2009', 27.3600006103516], ['2008', 26.9599990844727], ['2007', 27.6700000762939],
  ['2006', 26.9699993133545], ['2005', 27.2099990844727], ['2004', 27.6299991607666], ['2003', 29.6299991607666], ['2002', 31.4799995422363]];

const inputValue = [31.4799995422363, 29.6299991607666, 27.6299991607666, 27.2099990844727, 26.9699993133545, 27.6700000762939,
  26.9599990844727, 27.3600006103516, 25.3400001525879, 24.7999992370605, 25.0400009155273, 24.0900001525879, 24.2099990844727,
  21.6800003051758, 23.7399997711182, 23.7600002288818];

const outputAverage = 26.098124742507935;

const outputFilter = [['2002', 31.4799995422363], ['2003', 29.6299991607666], ['2004', 27.6299991607666], ['2005', 27.2099990844727], ['2006', 26.9699993133545],
  ['2007', 27.6700000762939], ['2008', 26.9599990844727], ['2009', 27.3600006103516], ['2010', 25.3400001525879], ['2011', 24.7999992370605],
  ['2012', 25.0400009155273], ['2013', 24.0900001525879], ['2014', 24.2099990844727], ['2015', 21.6800003051758]];

// describe('El objeto WORLDBANK', () => {
//   it('debería ser un objeto', () => {
//     expect(typeof worldbank).toEqual('object');
//   });
// });

describe('La función ORDENAR', ()=>{
  it('debería ser una función', () => {
    expect(typeof worldbank.sortArrData).toEqual('function');
  });
  it('debería retornar un array', () => {
    expect(Array.isArray(worldbank.sortArrData())).toEqual(true);
  });
  it('debería de ordenar de MAYOR a MENOR por VALOR', () => {
    expect(worldbank.sortArrData(input, 'Valores', 'Mayor')).toEqual(outputValMay);
  });
  it('debería de ordenar de MENOR a MAYOR por VALOR', () => {
    expect(worldbank.sortArrData(input, 'Valores', 'Menor')).toEqual(outputValMen);
  });
  it('debería de ordenar de MAYOR a MENOR por AÑO', () => {
    expect(worldbank.sortArrData(input, 'Año', 'Mayor')).toEqual(outputAñMay);
  });
  it('debería de ordenar de MENOR a MAYOR por AÑO', () => {
    expect(worldbank.sortArrData(input, 'Año', 'Menor')).toEqual(input);
  });
});

describe('La función PROMEDIO', ()=>{
  it('debería ser una función', () => {
    expect(typeof worldbank.averageValue).toEqual('function');
  });
  it('debería ser de tipo Number', () => {
    expect(typeof worldbank.averageValue(inputValue)).toEqual('number');
  });
  it('debería retornar el promedio', () => {
    expect(worldbank.averageValue(inputValue)).toEqual(outputAverage);
  });
});

describe('La funcion RANGO DE AÑOS', ()=>{
  it('debería ser una función', () => {
    expect(typeof worldbank.filter).toEqual('function');
  });
  it('debería ser una función', () => {
    expect(worldbank.filter(input, 2000, 2015)).toEqual(outputFilter);
  });
});